From e4217a901de943c02e78a76a38cc7d7d2a6abe99 Mon Sep 17 00:00:00 2001
From: Achill Gilgenast <achill@achill.org>
Date: Wed, 1 Oct 2025 10:16:19 +0200
Subject: [PATCH] Include <libgen.h> when using basename()

basename() is part of libgen.h in POSIX, so import it before using.

This fixes the build on musl libc with gcc 15+.
---
 discover/grub2/blscfg.c | 3 ++-
 ui/ncurses/nc-plugin.c  | 1 +
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/discover/grub2/blscfg.c b/discover/grub2/blscfg.c
index 94aca00b..3b4d95b5 100644
--- a/discover/grub2/blscfg.c
+++ b/discover/grub2/blscfg.c
@@ -3,9 +3,10 @@
 
 #include <assert.h>
 #include <ctype.h>
+#include <dirent.h>
+#include <libgen.h>
 #include <stdlib.h>
 #include <string.h>
-#include <dirent.h>
 
 #include <log/log.h>
 #include <file/file.h>
diff --git a/ui/ncurses/nc-plugin.c b/ui/ncurses/nc-plugin.c
index f897cc8e..1152bf3c 100644
--- a/ui/ncurses/nc-plugin.c
+++ b/ui/ncurses/nc-plugin.c
@@ -20,6 +20,7 @@
 #endif
 
 #include <errno.h>
+#include <libgen.h>
 #include <stdlib.h>
 #include <string.h>
 
